<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <title>Document</title>
</head>

<header>
    <h1 class="text-center mb-5">Rick and Morty</h1>
</header>

<body class="bg-light">
    <main>
        <div class="input-group mb-3">
            <input id="txtInput" type="text" class="form-control" placeholder="Digite o nome de um persongem"
                aria-label="Recipient’s username" aria-describedby="button-addon2">
            <button id="bntPsq" class="btn btn-outline-secondary" type="button"
                onclick="carregarInpunt()">pesquisar</button>
        </div>
    </main>

    <div class="container my-5">
        <div id="ram-container" class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">
            <!-- cards -->
        </div>
    </div>


    <script>
        const txtInput = document.getElementById('txtInput');
        const bntPsq = document.getElementById('bntPsq');
        const container = document.getElementById('ram-container');

        function procurarPersona(id) {
            fetch("https://rickandmortyapi.com/api/character/" + id)
            return fetch("https://rickandmortyapi.com/api/character/" + id)
                .then(function (resposta) {
                    return resposta.json();
                })
        }


        async function carregarInpunt() {
            let valorCampo = txtInput.value.trim();


            const resposta = await fetch("https://rickandmortyapi.com/api/character/?name=" + valorCampo);
            const dados = await resposta.json();

            container.innerHTML = '';

            if (dados.results && dados.results.length > 0) {
                dados.results.forEach(personaAtual => {
                    const { id, name, image, species, gender } = personaAtual;

                    const coluna = document.createElement('div');
                    coluna.className = 'col';
                    coluna.innerHTML = `
                    <div class="card h-100 shadow-sm"> 
                        <div class="card-body text-center"> 
                            <img src="${image}" alt="${name}" class="persona-img mb-2">
                            <h4 class="card-title">${name}</h4>
                            <h6>Tipo: ${species}</h6>
                            <h6>Gênero: ${gender}</h6>
                            <p class="card-text text-muted">#${id}</p>
                        </div>
                    </div>
                `;

                    container.appendChild(coluna);
                });
            } else {
                container.innerHTML = `<p class="text-center">Personagem não encontrado.</p>`;
            }


        }




        async function carregarPersona() {
            for (i = 1; i <= 826; i++) {
                let valorCampo = txtInput.value.toLowerCase();
                const personaAtual = await procurarPersona(i);
                let idPersona = personaAtual.id;
                let nome = personaAtual.name
                let imagem = personaAtual.image
                let especie = personaAtual.species
                let genero = personaAtual.gender

                console.log(idPersona, nome, imagem)

                const coluna = document.createElement('div')
                coluna.className = 'col';

                coluna.innerHTML = `
                    <div class="card h-100 shadow-sm"> 
                        <div class="card-body text-center"> 
                                <img src="${imagem}" alt="${nome}" class="persona-img mb-2">
                                <h4 class="card-title">${nome}</h4>
                                <h6>Tipo: ${especie}</h6>
                                <h6>Genero: ${genero}</h6>
                                <p class="card-text text-muted">#${idPersona}</p>
                            </div>
                        </div>

                `


                container.appendChild(coluna)
            }
        }

        carregarPersona()
        txtInput.value



    </script>

</body>

</html>